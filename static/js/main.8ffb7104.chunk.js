(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{109:function(e,t){},111:function(e,t){},141:function(e){e.exports={sizes:[18,9,1],layers:[{0:{},1:{},2:{},3:{},4:{},5:{},6:{},7:{},8:{},9:{},10:{},11:{},12:{},13:{},14:{},15:{},16:{},17:{}},{0:{bias:-7.8966169357299805,weights:{0:-2.381359338760376,1:-3.797837257385254,2:-2.0400607585906982,3:.24610404670238495,4:-.7341923117637634,5:-.28530174493789673,6:.8227603435516357,7:1.2502977848052979,8:.9622389078140259,9:2.672224283218384,10:2.9887168407440186,11:2.573725700378418,12:-3.1698203086853027,13:-.4641140401363373,14:-3.8355464935302734,15:-1.2429770231246948,16:-.2970331311225891,17:-1.0738674402236938}},1:{bias:-5.5930328369140625,weights:{0:-1.0450918674468994,1:-1.8018320798873901,2:-1.5452263355255127,3:.5359573364257812,4:13.792004585266113,5:-.40016037225723267,6:1.6137151718139648,7:1.4419585466384888,8:1.3501598834991455,9:1.3669862747192383,10:1.2938971519470215,11:2.285019874572754,12:-.5016791224479675,13:.1496390402317047,14:.2669692635536194,15:-3.073425531387329,16:-2.354199171066284,17:-1.911421775817871}},2:{bias:9.159090995788574,weights:{0:-.48637574911117554,1:-6.544234275817871,2:-1.1975252628326416,3:3.758155345916748,4:-.10160838812589645,5:3.4122273921966553,6:2.6033718585968018,7:-4.776597023010254,8:2.2540123462677,9:.1691005825996399,10:3.8070640563964844,11:.42866554856300354,12:-.7109812498092651,13:-.5165160894393921,14:-1.20460844039917,15:-.8400807976722717,16:4.2617387771606445,17:-.8974480032920837}},3:{bias:8.67982006072998,weights:{0:.9082134962081909,1:-1.2379391193389893,2:-.18206702172756195,3:.7077797055244446,4:1.8244701623916626,5:1.3767415285110474,6:-.03108268976211548,7:.6296650767326355,8:3.096820116043091,9:1.2496949434280396,10:2.7339839935302734,11:2.4274837970733643,12:5.193971157073975,13:1.4521816968917847,14:5.560840606689453,15:-3.3935232162475586,16:-2.9404430389404297,17:-2.497934341430664}},4:{bias:-9.642535209655762,weights:{0:-1.9626450538635254,1:.9524280428886414,2:1.5418695211410522,3:-4.0576372146606445,4:1.0586357116699219,5:-.13445286452770233,6:-4.1066436767578125,7:.9156181216239929,8:.8588104844093323,9:2.5959887504577637,10:-1.2597362995147705,11:-1.6298452615737915,12:2.985349416732788,13:-3.602283000946045,14:.09634482860565186,15:2.3594186305999756,16:-1.9435725212097168,17:-1.6824277639389038}},5:{bias:-6.133610725402832,weights:{0:-.019573472440242767,1:-1.0740430355072021,2:3.1692276000976562,3:.35900089144706726,4:-5.677048206329346,5:-.7325714826583862,6:2.729188919067383,7:-1.0087693929672241,8:1.7375367879867554,9:-.0604015588760376,10:-.26909810304641724,11:-.5777332186698914,12:-1.4678583145141602,13:11.876734733581543,14:-2.195288896560669,15:-.182460755109787,16:-1.0403273105621338,17:-.7022929787635803}},6:{bias:8.007070541381836,weights:{0:2.0115692615509033,1:1.6147950887680054,2:-1.1091322898864746,3:1.4010505676269531,4:-16.92533302307129,5:-2.7815728187561035,6:1.9759037494659424,7:1.4625722169876099,8:-2.4115750789642334,9:-2.7028677463531494,10:-1.0620533227920532,11:2.1975810527801514,12:-1.4598488807678223,13:.10331255197525024,14:2.211144208908081,15:-2.1125943660736084,16:-1.3660242557525635,17:2.054180860519409}},7:{bias:-6.7241973876953125,weights:{0:-.47510743141174316,1:2.7509849071502686,2:-.8306822776794434,3:-6.314098358154297,4:15.76703929901123,5:-5.756467342376709,6:-.9213377237319946,7:1.8817068338394165,8:-.09539694339036942,9:.29856929183006287,10:.2412295639514923,11:.9372372031211853,12:2.615635633468628,13:.773547351360321,14:2.0042831897735596,15:1.1237622499465942,16:-.1694977581501007,17:.8150759339332581}},8:{bias:-7.424201965332031,weights:{0:.23161739110946655,1:-1.4472464323043823,2:.2587355971336365,3:-6.158636093139648,4:4.815893650054932,5:-6.459916591644287,6:.09726205468177795,7:-1.4822874069213867,8:.7578044533729553,9:-.07661676406860352,10:-.0369797982275486,11:-.5334407687187195,12:1.9111943244934082,13:-5.081940650939941,14:1.6944876909255981,15:-.11360188573598862,16:-.625576913356781,17:-.3191961348056793}}},{0:{bias:3.3655166625976562,weights:{0:-7.300460338592529,1:4.5543532371521,2:-4.726757049560547,3:8.910028457641602,4:-6.648667812347412,5:-.9930552840232849,6:-5.5675435066223145,7:-9.989721298217773,8:7.49636173248291}}}],outputLookup:!0,inputLookup:!0,activation:"sigmoid",trainOpts:{iterations:10,errorThresh:.005,log:!1,logPeriod:10,learningRate:.3,momentum:.1,callbackPeriod:10,beta1:.9,beta2:.999,epsilon:1e-8}}},75:function(e,t,n){e.exports=n(76)},76:function(e,t,n){"use strict";n.r(t);var r=n(74),a=n(32),i=n(33),o=n(35),s=n(34),u=n(36),l=n(0),c=n.n(l),h=n(73),v=n.n(h),f=(n(81),n(82));function d(e){return c.a.createElement("button",{className:"square",onClick:function(){e.onClick()}},e.value)}var p=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"renderSquare",value:function(e){var t=this;return c.a.createElement(d,{value:this.props.squares[e],onClick:function(){return t.props.onClick(e)}})}},{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement("div",{className:"board-row"},this.renderSquare(0),this.renderSquare(1),this.renderSquare(2)),c.a.createElement("div",{className:"board-row"},this.renderSquare(3),this.renderSquare(4),this.renderSquare(5)),c.a.createElement("div",{className:"board-row"},this.renderSquare(6),this.renderSquare(7),this.renderSquare(8)))}}]),t}(c.a.Component),m=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(s.a)(t).call(this,e))).state={squares:Array(9).fill(null),xIsNext:!0,searchSize:1e3},f.search(),n.playerX=!0,n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"handleClick",value:function(e){var t=this.state.squares.slice(),n=this.state.xIsNext;if(!g(t)&&!t[e]){t[e]=n?"X":"O",n=!n;var r=function(e){var t=e%3;return[t,(e-t)/3]}(e);f.update(r),this.computerMove(t,n)}}},{key:"computerMove",value:function(e,t){for(var n=!0,r=0;r<9;r++)if(!e[r]){n=!1;break}if(g(e)||n)this.setState({squares:e});else{var a=f.pickMove(this.state.searchSize);f.update(a),e[function(e){return e[0]+3*e[1]}(a)]=t?"X":"O",this.setState({squares:e,xIsNext:!t})}}},{key:"newGame",value:function(){this.state.searchSize<50&&this.setState({searchSize:50}),f.newGame();var e=Array(9).fill(null);this.setState({squares:e,xIsNext:!0}),f.search(),this.playerX||this.computerMove(e,!0)}},{key:"playAsX",value:function(){this.playerX=!0,this.newGame()}},{key:"playAsO",value:function(){this.playerX=!1,this.newGame()}},{key:"updateSearchSize",value:function(e){this.setState({searchSize:e.target.value})}},{key:"render",value:function(){var e,t=this,n=g(this.state.squares);return e=n?"Winner: "+n:"You are playing as "+(this.state.xIsNext?"X":"O"),c.a.createElement("div",{className:"game"},c.a.createElement("h1",null,"Tic Tac Toe Using MCTS"),c.a.createElement("div",{className:"game-board"},c.a.createElement(p,{squares:this.state.squares,onClick:function(e){return t.handleClick(e)}})),c.a.createElement("div",{className:"game-info"},c.a.createElement("div",null,e),c.a.createElement("div",null,c.a.createElement("button",{onClick:function(){return t.newGame()}},"New Game")),c.a.createElement("div",null,c.a.createElement("button",{onClick:function(){return t.playAsX()}},"Play As X")),c.a.createElement("div",null,c.a.createElement("button",{onClick:function(){return t.playAsO()}},"Play As O")),c.a.createElement("div",null,"Search Size (min 50): ",c.a.createElement("input",{type:"text",value:this.state.searchSize,onChange:function(e){return t.updateSearchSize(e)}}))))}}]),t}(c.a.Component);function g(e){for(var t=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],n=0;n<t.length;n++){var a=Object(r.a)(t[n],3),i=a[0],o=a[1],s=a[2];if(e[i]&&e[i]===e[o]&&e[i]===e[s])return e[i]}return null}v.a.render(c.a.createElement(m,null),document.getElementById("root"))},81:function(e,t,n){},82:function(e,t,n){var r=n(83),a=n(85),i=n(19),o=n(87),s=n(141),u=n(142),l=n(144),c=new o.NeuralNetwork;c.fromJSON(s);var h=i.cloneDeep(a);h.init(i.cloneDeep(r),c);var v={};function f(e){var t=i.cloneDeep(e);for(var n in t)for(var r=t[n],a=0;a<3;a++){var o=[r[a+6],r[a]];r[a]=o[0],r[a+6]=o[1]}return t}function d(e){var t=i.cloneDeep(e);for(var n in t)for(var r=t[n],a=0;a<3;a++){var o=3*a,s=[r[o+2],r[o]];r[o]=s[0],r[o+2]=s[1]}return t}function p(e){var t=i.cloneDeep(e);for(var n in t)for(var r=t[n],a=0;a<r.length/2;a++){var o=r.length-a-1,s=[r[o],r[a]];r[a]=s[0],r[o]=s[1]}return t}v.train=function(){var e=100,t=[],n=function(){for(var e=[];!r.isDone();){h.runSearch(500);var n=h.scores();if(n.length<3||Math.random()<.5)h.updateRoot();else{var a=u.nlargest(n,3,function(e,t){return e.value-t.value})[Math.floor(3*Math.random())].index;h.updateRoot(a)}r.update(h.rootMove());var o=r.getState();[o,d(o),f(o),p(o)].forEach(function(t){e.push(t)})}t.push(e.map(function(e){return{input:i.concat(e.x,e.o),output:[(r.getWinner()+1)/2]}})),r.newGame(),h.init(i.cloneDeep(r),c)};do{n()}while(--e>0);var a=i.flatten(t);c.train(a,{iterations:10})},v.save=function(){var e=c.toJSON();e=JSON.stringify(e),l.writeFile("./save.json",e,"utf8",function(e){if(e)return console.log("An error occured while writing JSON Object to File."),console.log(e);console.log("Agent Updated")})},v.play=function(){for(;!r.isDone();)h.runSearch(100),h.updateRoot(),r.update(h.rootMove()),console.log(r.displayState())},v.update=function(e){if(!r.isDone()){for(var t=h.scores(),n=-1,a=0;a<t.length;a++)if(t[a].move[0]==e[0]&&t[a].move[1]==e[1]){n=t[a].index;break}h.updateRoot(n),r.update(e)}},v.search=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;h.runSearch(e)},v.searchRaw=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;h.rawSearch(e)},v.pickMove=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;if(!r.isDone())return this.search(e),h.bestPlay()},v.pickMoveRaw=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;if(!r.isDone())return this.searchRaw(e),h.bestPlay()},v.newGame=function(){r.newGame(),h.init(i.cloneDeep(r),c)},e.exports=v},83:function(e,t,n){var r=n(19),a={player:1,over:!1,winner:0,moveCount:0,state:{x:Array(9).fill(0),o:Array(9).fill(0)}};function i(e){return e[0]+3*e[1]}function o(e){var t=e%3;return[t,(e-t)/3]}a.newGame=function(){this.state.x=Array(9).fill(0),this.state.o=Array(9).fill(0),this.player=1,this.over=!1,this.winner=0,this.moveCount=0},a.getState=function(){return this.state},a.getPlayer=function(){return this.player},a.isDone=function(){return this.over},a.getWinner=function(){return this.winner},a.displayState=function(){var e=this,t="";return this.state.x.forEach(function(n,r){var a=1===n?"x":1===e.state.o[r]?"o":"_";t+=r<6?"_"+a+"_":" "+a+" ",t+=r%3==2?"\n":"|"}),t},a.validMoves=function(){for(var e=[],t=0;t<9;t++)if(0==this.state.x[t]&&0==this.state.o[t]){var n=r.cloneDeep(this.state);1===this.player?n.x[t]=1:n.o[t]=1;var a=o(t);e.push({move:a,state:n})}return e},a.update=function(e){var t,n=i(e);return(t=1==this.player?this.state.x:this.state.o)[n]=1,this.over=1==t[i([(e[0]+1)%3,e[1]])]&&1==t[i([(e[0]+2)%3,e[1]])],this.over||(this.over=1==t[i([e[0],(e[1]+1)%3])]&&1==t[i([e[0],(e[1]+2)%3])]),this.over||n%2!=0||(this.over=1==t[0]&&1==t[4]&&1==t[8]||1==t[2]&&1==t[4]&&1==t[6]),this.over?this.winner=this.player:this.over=8==this.moveCount,this.player=-this.player,this.moveCount++,this.over},e.exports=a},85:function(e,t,n){var r=n(86),a=n(19),i={};function o(e){var t=e.children[0],n=0;return e.children.forEach(function(e){var r=e.node.wins/e.node.plays;r>n&&(t=e,n=r)}),t}i.init=function(e,t){this.game=e,this.root=r.newNode(null,null,e.getState(),e.validMoves()),this.net=t},i.runSearch=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.4,i=0,o=function(){var t=e.root,i=!1,o=a.cloneDeep(e.game),s=function(){if(o.isDone())return"break";var e=-1,a=void 0;t.children.forEach(function(s){if(!i)if(null==s.node)o.update(s.move),s.node=r.newNode(t,s.move,o.getState(),o.validMoves()),i=!0,a=s.node;else{var u=s.node.wins/s.node.plays+n*Math.sqrt(Math.log(t.plays)/s.node.plays);u>e&&(a=s.node,e=u)}}),t=a,i||o.update(a.move)};do{if("break"===s())break}while(!i);for(var u=o.getPlayer();!o.isDone();){for(var l=o.validMoves(),c=l.map(function(t){var n=a.concat(t.state.x,t.state.o),r=e.net.run(n);return"number"!=typeof r&&(r=r[0]),1!=o.getPlayer()&&(r=1-r),r}),h=0,v=1;v<c.length;v++)c[v]>c[h]&&(h=v);o.update(l[h].move)}if(.5==o.getWinner())do{t.plays+=1,t.wins+=.5,t=t.parent}while(null!=t);else{var f=o.getWinner()==u?0:1;do{t.plays+=1,t.wins+=f,f=Math.abs(f-1),t=t.parent}while(null!=t)}};do{o()}while(++i<t)},i.rawSearch=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.4,i=0,o=function(){var t=e.root,i=!1,o=a.cloneDeep(e.game),s=function(){if(o.isDone())return"break";var e=-1,a=void 0;t.children.forEach(function(s){if(!i)if(null==s.node)o.update(s.move),s.node=r.newNode(t,s.move,o.getState(),o.validMoves()),i=!0,a=s.node;else{var u=s.node.wins/s.node.plays+n*Math.sqrt(Math.log(t.plays)/s.node.plays);u>e&&(a=s.node,e=u)}}),t=a,i||o.update(a.move)};do{if("break"===s())break}while(!i);for(var u=o.getPlayer();!o.isDone();){var l=o.validMoves(),c=Math.floor(Math.random()*l.length);o.update(l[c].move)}if(.5==o.getWinner())do{t.plays+=1,t.wins+=.5,t=t.parent}while(null!=t);else{var h=o.getWinner()==u?0:1;do{t.plays+=1,t.wins+=h,h=Math.abs(h-1),t=t.parent}while(null!=t)}};do{o()}while(++i<t)},i.bestPlay=function(){return o(this.root).move},i.scores=function(){return this.root.children.map(function(e,t){return{value:e.node.wins/e.node.plays,index:t,move:e.move}})},i.updateRoot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this.root=e<0?o(this.root).node:this.root.children[e].node,this.game.update(this.root.move),this.root.parent=null},i.rootMove=function(){return this.root.move},e.exports=i},86:function(e,t){var n={newNode:function(e,t,n,r){var a={move:t,state:n,plays:0,wins:0,parent:e};return a.children=r.map(function(e){return{move:e.move,node:null}}),a}};e.exports=n}},[[75,1,2]]]);
//# sourceMappingURL=main.8ffb7104.chunk.js.map